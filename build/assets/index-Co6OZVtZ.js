import{r,j as E}from"./index-DC73O2Iq.js";import{c as z,g as q,d as J,b as A,u as Q,a as X,e as Z,f as _}from"./index-C4R266pM.js";import{u as D}from"./createLucideIcon-DV6iIV51.js";import{P as U}from"./index-BDJGNcjk.js";var O="rovingFocusGroup.onEntryFocus",$={bubbles:!1,cancelable:!0},S="RovingFocusGroup",[M,L,ee]=q(S),[te,Re]=z(S,[ee]),[ne,oe]=te(S),G=r.forwardRef((e,t)=>E.jsx(M.Provider,{scope:e.__scopeRovingFocusGroup,children:E.jsx(M.Slot,{scope:e.__scopeRovingFocusGroup,children:E.jsx(re,{...e,ref:t})})}));G.displayName=S;var re=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:f=!1,dir:p,currentTabStopId:g,defaultCurrentTabStopId:N,onCurrentTabStopIdChange:u,onEntryFocus:s,preventScrollOnEntryFocus:i=!1,...m}=e,v=r.useRef(null),l=D(t,v),F=Q(p),[T,a]=X({prop:g,defaultProp:N??null,onChange:u,caller:S}),[I,y]=r.useState(!1),d=Z(s),R=L(o),C=r.useRef(!1),[W,P]=r.useState(0);return r.useEffect(()=>{const c=v.current;if(c)return c.addEventListener(O,d),()=>c.removeEventListener(O,d)},[d]),E.jsx(ne,{scope:o,orientation:n,dir:F,loop:f,currentTabStopId:T,onItemFocus:r.useCallback(c=>a(c),[a]),onItemShiftTab:r.useCallback(()=>y(!0),[]),onFocusableItemAdd:r.useCallback(()=>P(c=>c+1),[]),onFocusableItemRemove:r.useCallback(()=>P(c=>c-1),[]),children:E.jsx(U.div,{tabIndex:I||W===0?-1:0,"data-orientation":n,...m,ref:l,style:{outline:"none",...e.style},onMouseDown:A(e.onMouseDown,()=>{C.current=!0}),onFocus:A(e.onFocus,c=>{const B=!C.current;if(c.target===c.currentTarget&&B&&!I){const x=new CustomEvent(O,$);if(c.currentTarget.dispatchEvent(x),!x.defaultPrevented){const h=R().filter(b=>b.focusable),V=h.find(b=>b.active),Y=h.find(b=>b.id===T),H=[V,Y,...h].filter(Boolean).map(b=>b.ref.current);k(H,i)}}C.current=!1}),onBlur:A(e.onBlur,()=>y(!1))})})}),j="RovingFocusGroupItem",K=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:f=!1,tabStopId:p,children:g,...N}=e,u=J(),s=p||u,i=oe(j,o),m=i.currentTabStopId===s,v=L(o),{onFocusableItemAdd:l,onFocusableItemRemove:F,currentTabStopId:T}=i;return r.useEffect(()=>{if(n)return l(),()=>F()},[n,l,F]),E.jsx(M.ItemSlot,{scope:o,id:s,focusable:n,active:f,children:E.jsx(U.span,{tabIndex:m?0:-1,"data-orientation":i.orientation,...N,ref:t,onMouseDown:A(e.onMouseDown,a=>{n?i.onItemFocus(s):a.preventDefault()}),onFocus:A(e.onFocus,()=>i.onItemFocus(s)),onKeyDown:A(e.onKeyDown,a=>{if(a.key==="Tab"&&a.shiftKey){i.onItemShiftTab();return}if(a.target!==a.currentTarget)return;const I=ie(a,i.orientation,i.dir);if(I!==void 0){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let d=v().filter(R=>R.focusable).map(R=>R.ref.current);if(I==="last")d.reverse();else if(I==="prev"||I==="next"){I==="prev"&&d.reverse();const R=d.indexOf(a.currentTarget);d=i.loop?ce(d,R+1):d.slice(R+1)}setTimeout(()=>k(d))}}),children:typeof g=="function"?g({isCurrentTabStop:m,hasTabStop:T!=null}):g})})});K.displayName=j;var se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ae(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ie(e,t,o){const n=ae(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return se[n]}function k(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function ce(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var Ne=G,be=K;function ue(e,t){return r.useReducer((o,n)=>t[o][n]??o,e)}var le=e=>{const{present:t,children:o}=e,n=fe(t),f=typeof o=="function"?o({present:n.isPresent}):r.Children.only(o),p=D(n.ref,de(f));return typeof o=="function"||n.isPresent?r.cloneElement(f,{ref:p}):null};le.displayName="Presence";function fe(e){const[t,o]=r.useState(),n=r.useRef(null),f=r.useRef(e),p=r.useRef("none"),g=e?"mounted":"unmounted",[N,u]=ue(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const s=w(n.current);p.current=N==="mounted"?s:"none"},[N]),_(()=>{const s=n.current,i=f.current;if(i!==e){const v=p.current,l=w(s);e?u("MOUNT"):l==="none"||s?.display==="none"?u("UNMOUNT"):u(i&&v!==l?"ANIMATION_OUT":"UNMOUNT"),f.current=e}},[e,u]),_(()=>{if(t){let s;const i=t.ownerDocument.defaultView??window,m=l=>{const T=w(n.current).includes(CSS.escape(l.animationName));if(l.target===t&&T&&(u("ANIMATION_END"),!f.current)){const a=t.style.animationFillMode;t.style.animationFillMode="forwards",s=i.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=a)})}},v=l=>{l.target===t&&(p.current=w(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{i.clearTimeout(s),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:r.useCallback(s=>{n.current=s?getComputedStyle(s):null,o(s)},[])}}function w(e){return e?.animationName||"none"}function de(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}export{be as I,le as P,Ne as R,Re as c};
