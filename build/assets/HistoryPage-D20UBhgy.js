import{R as E,u as R,r as m,j as e,C as r,d as l,v as p,S as j,e as f,f as N,g as v,h as n,B as u,Q as B,U as L}from"./index-CMaY1ksq.js";import{B as F}from"./badge-C4Kp6e0E.js";import{T as I,a as W,b as o,c as V}from"./tabs-DlwbsJCZ.js";import{I as G}from"./input-B7aCAOMd.js";import{S as z}from"./search-MU0eTEMG.js";import{D as w}from"./download-4H8CcgNR.js";import{M as K}from"./map-pin-DkOsxlVp.js";import{C as J}from"./calendar-BHBABvW8.js";import{C as y}from"./clock-CANiWCxy.js";import{E as C}from"./eye-Caphy5RP.js";import{C as U}from"./circle-x-C-sw20Q0.js";import{C as q}from"./circle-alert-Sav3AWQj.js";import{C as Q}from"./circle-check-big-oozbaIQQ.js";import"./index-CCJ8bWTu.js";const X=E.memo(({user:_})=>{const{t:O}=R(),[c,P]=m.useState("all"),[d,T]=m.useState(""),[x,S]=m.useState("all"),[h,k]=m.useState("date"),a=[{id:"WH001",customer:"Arjun Patel",customerPhone:"+91 98765 43210",service:"Plumbing Repair",description:"Fixed leaking pipes in kitchen and bathroom",date:"2024-01-20",startTime:"09:00 AM",endTime:"12:30 PM",duration:"3h 30m",location:"Sector 15, Noida",amount:1200,status:"Completed",rating:4.8,feedback:"Excellent work! Very professional and quick.",images:["before.jpg","after.jpg"],category:"Plumbing"},{id:"WH002",customer:"Kavita Sharma",customerPhone:"+91 87654 32109",service:"Electrical Installation",description:"Installed new ceiling fans and switches",date:"2024-01-19",startTime:"02:00 PM",endTime:"06:00 PM",duration:"4h 00m",location:"Rajouri Garden, Delhi",amount:1800,status:"Completed",rating:5,feedback:"Perfect installation. Highly recommended!",images:["installation.jpg"],category:"Electrical"},{id:"WH003",customer:"Rohit Kumar",customerPhone:"+91 76543 21098",service:"House Cleaning",description:"Deep cleaning of 3BHK apartment",date:"2024-01-18",startTime:"10:00 AM",endTime:"02:00 PM",duration:"4h 00m",location:"Dwarka, Delhi",amount:1500,status:"Payment Pending",rating:4.5,feedback:"Good cleaning service, but took a bit longer than expected.",images:["cleaning1.jpg","cleaning2.jpg"],category:"Cleaning"},{id:"WH004",customer:"Sneha Singh",customerPhone:"+91 65432 10987",service:"Wall Painting",description:"Painted living room and bedroom walls",date:"2024-01-17",startTime:"08:00 AM",endTime:"05:00 PM",duration:"9h 00m",location:"Gurgaon, Haryana",amount:2500,status:"Cancelled",rating:null,feedback:null,images:[],category:"Painting"},{id:"WH005",customer:"Manoj Gupta",customerPhone:"+91 54321 09876",service:"Furniture Assembly",description:"Assembled wardrobe and study table",date:"2024-01-16",startTime:"11:00 AM",endTime:"04:00 PM",duration:"5h 00m",location:"Lajpat Nagar, Delhi",amount:1e3,status:"Completed",rating:4.2,feedback:"Good work but could be faster.",images:["furniture1.jpg"],category:"Carpentry"}],i={all:a.length,completed:a.filter(s=>s.status==="Completed").length,pending:a.filter(s=>s.status==="Payment Pending").length,cancelled:a.filter(s=>s.status==="Cancelled").length},b=s=>{switch(s){case"Completed":return e.jsx(Q,{className:"h-4 w-4 text-green-500"});case"Payment Pending":return e.jsx(q,{className:"h-4 w-4 text-orange-500"});case"Cancelled":return e.jsx(U,{className:"h-4 w-4 text-red-500"});default:return e.jsx(y,{className:"h-4 w-4 text-gray-500"})}},D=s=>{switch(s){case"Completed":return"bg-green-500 hover:bg-green-600";case"Payment Pending":return"bg-orange-500 hover:bg-orange-600";case"Cancelled":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-500 hover:bg-gray-600"}},g=a.filter(s=>!(c!=="all"&&s.status.toLowerCase().replace(" ","")!==c.replace("pending","paymentpending")||x!=="all"&&s.status!==x||d&&!s.customer.toLowerCase().includes(d.toLowerCase())&&!s.service.toLowerCase().includes(d.toLowerCase()))).sort((s,t)=>{switch(h){case"date":return new Date(t.date).getTime()-new Date(s.date).getTime();case"amount":return t.amount-s.amount;case"rating":return(t.rating||0)-(s.rating||0);default:return 0}}),H=a.filter(s=>s.status==="Completed").reduce((s,t)=>s+t.amount,0),A=a.filter(s=>s.rating).reduce((s,t,Y,M)=>s+(t.rating||0)/M.length,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Enhanced Work History"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive history of all your work assignments and customer interactions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl",children:a.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Jobs"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-green-600",children:i.completed}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl",children:["₹",H]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earnings"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(p,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),e.jsx("p",{className:"text-2xl",children:A.toFixed(1)})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Rating"})]})})})]}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Search by customer name or service...",value:d,onChange:s=>T(s.target.value),className:"pl-10"})]})}),e.jsxs(j,{value:x,onValueChange:S,children:[e.jsx(f,{className:"w-full md:w-48",children:e.jsx(N,{placeholder:"Filter by status"})}),e.jsxs(v,{children:[e.jsx(n,{value:"all",children:"All Status"}),e.jsx(n,{value:"Completed",children:"Completed"}),e.jsx(n,{value:"Payment Pending",children:"Payment Pending"}),e.jsx(n,{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs(j,{value:h,onValueChange:k,children:[e.jsx(f,{className:"w-full md:w-48",children:e.jsx(N,{placeholder:"Sort by"})}),e.jsxs(v,{children:[e.jsx(n,{value:"date",children:"Date"}),e.jsx(n,{value:"amount",children:"Amount"}),e.jsx(n,{value:"rating",children:"Rating"})]})]}),e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Export"]})]})})}),e.jsxs(I,{value:c,onValueChange:P,children:[e.jsxs(W,{children:[e.jsxs(o,{value:"all",children:["All (",i.all,")"]}),e.jsxs(o,{value:"completed",children:["Completed (",i.completed,")"]}),e.jsxs(o,{value:"paymentpending",children:["Pending (",i.pending,")"]}),e.jsxs(o,{value:"cancelled",children:["Cancelled (",i.cancelled,")"]})]}),e.jsx(V,{value:c,className:"space-y-4",children:g.length===0?e.jsx(r,{children:e.jsxs(l,{className:"p-12 text-center",children:[e.jsx(B,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg",children:"No work history found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your filters or search terms"})]})}):g.map(s=>e.jsx(r,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.service,b(s.status)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Job ID: ",s.id]})]}),e.jsx(F,{className:D(s.status),children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.customer})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[s.date," • ",s.startTime," - ",s.endTime]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(y,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Duration: ",s.duration]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount: "}),e.jsxs("span",{className:"font-medium text-green-600",children:["₹",s.amount]})]}),s.rating&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(p,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),e.jsxs("span",{children:[s.rating,"/5.0"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Description: "}),s.description]}),s.feedback&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Customer Feedback: "}),e.jsxs("span",{className:"italic",children:['"',s.feedback,'"']})]})]}),s.images.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.images.length," image(s) uploaded"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:w-32",children:[e.jsxs(u,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.status==="Completed"&&e.jsxs(u,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Receipt"]})]})]})})},s.id))})]})]})});X.displayName="HistoryPage";export{X as HistoryPage,X as default};
