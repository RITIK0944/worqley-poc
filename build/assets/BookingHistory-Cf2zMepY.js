import{r as c,j as e,C as r,d as l,v as g,E as je,B as t,S as C,e as S,f as b,g as y,h as i,a as k,b as B,U as pe,Q as ge,T as ve,O as m}from"./index-CMaY1ksq.js";import{B as P}from"./badge-C4Kp6e0E.js";import{T as Ne,a as fe,b as R,c as T}from"./tabs-DlwbsJCZ.js";import{I as we}from"./input-B7aCAOMd.js";import{D as Ce,b as Se,c as be,d as ye,e as ke}from"./dialog-CPwAOBAh.js";import{L as E}from"./label-CI_xhXcR.js";import{T as Be}from"./textarea-BJMFOVaY.js";import{P as Pe}from"./progress-B3OXSqW2.js";import{C as Re}from"./circle-check-big-oozbaIQQ.js";import{W as Te}from"./wallet-D8-Qg0C7.js";import{C as F}from"./chart-column-DqjuAbau.js";import{S as Le}from"./search-MU0eTEMG.js";import{C as K}from"./clock-CANiWCxy.js";import{C as De}from"./circle-plus-BO8bQcY9.js";import{C as O}from"./calendar-BHBABvW8.js";import{T as Me}from"./target-D1CkmeIA.js";import{A as Ae}from"./award-C2w9bRK7.js";import{M as $e}from"./map-pin-DkOsxlVp.js";import{C as W}from"./circle-x-C-sw20Q0.js";import{T as Ie}from"./timer-BzvohRlG.js";import{E as ze}from"./eye-Caphy5RP.js";import{P as Ee}from"./phone-BuINqZ0q.js";import{M as Fe}from"./message-square-DrRUSovI.js";import{D as Ke}from"./download-4H8CcgNR.js";import{S as Oe}from"./share-2-C7LUJTTY.js";import"./index-CCJ8bWTu.js";const Y=[{id:"BK001",workerName:"Rajesh Kumar",workerPhone:"9876543210",service:"Plumber",date:"2024-01-20",time:"2:00 PM - 4:00 PM",location:"Sector 15, Gurgaon",amount:"₹800",status:"Confirmed",description:"Kitchen sink leakage repair"},{id:"BK002",workerName:"Suresh Patel",workerPhone:"9876543211",service:"Electrician",date:"2024-01-22",time:"10:00 AM - 12:00 PM",location:"MG Road, Delhi",amount:"₹1200",status:"In Progress",description:"Electrical wiring installation"}],H=[{id:"BK003",workerName:"Amit Singh",workerPhone:"9876543212",service:"Carpenter",date:"2024-01-15",time:"9:00 AM - 6:00 PM",location:"Connaught Place, Delhi",amount:"₹2500",status:"Completed",description:"Kitchen cabinet installation",rating:5,review:"Excellent work, very professional"},{id:"BK004",workerName:"Manoj Sharma",workerPhone:"9876543213",service:"Painter",date:"2024-01-10",time:"8:00 AM - 5:00 PM",location:"Saket, Delhi",amount:"₹3200",status:"Completed",description:"Living room painting",rating:4,review:"Good work, completed on time"},{id:"BK005",workerName:"Ravi Yadav",workerPhone:"9876543214",service:"Plumber",date:"2024-01-08",time:"3:00 PM - 5:00 PM",location:"Lajpat Nagar, Delhi",amount:"₹600",status:"Cancelled",description:"Bathroom tap repair",cancelReason:"Worker unavailable"}],We=v=>{switch(v){case"Confirmed":return"bg-blue-500";case"In Progress":return"bg-yellow-500";case"Completed":return"bg-green-500";case"Cancelled":return"bg-red-500";default:return"bg-gray-500"}};function js({user:v,onNavigate:V}){if(!v)return null;const[U,G]=c.useState("current"),[o,Q]=c.useState(""),[u,q]=c.useState("all"),[j,J]=c.useState("all"),[X,_]=c.useState("date"),[Z,p]=c.useState(!1),[ee,L]=c.useState(null),[D,M]=c.useState(0),[se,A]=c.useState(""),[$,ae]=c.useState(!1),te=(s,a)=>{alert(`Calling ${a} at ${s}`)},re=(s,a)=>{alert(`Opening chat with ${a}`)},le=s=>{alert(`Rebooking ${s.service} service with ${s.workerName}`)},ie=s=>{m.success(`Downloading receipt for booking ${s}`)},ce=()=>{if(D===0){m.error("Please select a rating");return}m.success("Review submitted successfully!"),p(!1),M(0),A(""),L(null)},ne=s=>{L(s),p(!0)},de=s=>{m.info(`Tracking booking ${s.id}`)},oe=s=>{m.success(`Booking ${s.id} has been cancelled`)},me=s=>{m.success("Booking details copied to clipboard")},xe=s=>{m.info(`Dispute raised for booking ${s.id}`)},N=Y.filter(s=>{const a=s.workerName.toLowerCase().includes(o.toLowerCase())||s.service.toLowerCase().includes(o.toLowerCase())||s.id.toLowerCase().includes(o.toLowerCase()),h=u==="all"||s.status.toLowerCase()===u,d=j==="all"||s.service.toLowerCase()===j;return a&&h&&d}),f=H.filter(s=>{const a=s.workerName.toLowerCase().includes(o.toLowerCase())||s.service.toLowerCase().includes(o.toLowerCase())||s.id.toLowerCase().includes(o.toLowerCase()),h=u==="all"||s.status.toLowerCase()===u,d=j==="all"||s.service.toLowerCase()===j;return a&&h&&d}),x=[...Y,...H],n=x.filter(s=>s.status==="Completed"),I=n.reduce((s,a)=>s+parseInt(a.amount.replace("₹","").replace(",","")),0),he=n.filter(s=>s.rating).length>0?n.filter(s=>s.rating).reduce((s,a)=>s+(a.rating||0),0)/n.filter(s=>s.rating).length:0,w=[...new Set(x.map(s=>s.service))],ue=[{month:"Jan",amount:2800,bookings:3},{month:"Feb",amount:1500,bookings:2},{month:"Mar",amount:3200,bookings:4},{month:"Apr",amount:0,bookings:0}],z=(s,a=!0)=>e.jsx(r,{className:"hover:shadow-lg transition-all duration-200 border-l-4 border-l-primary",children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-primary/10 rounded-full p-3",children:e.jsx(pe,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:s.workerName}),e.jsxs(P,{variant:"outline",className:"text-xs",children:["ID: ",s.id]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.service," Service"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),s.date]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),s.time]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(P,{className:`${We(s.status)} text-white mb-2`,children:s.status}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:s.amount})]})]}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Service Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.location})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Service Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),s.rating&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((h,d)=>e.jsx(g,{className:`h-4 w-4 ${d<s.rating?"text-yellow-500 fill-current":"text-gray-300"}`},d))}),e.jsxs("span",{className:"text-sm font-medium",children:["Your Rating: ",s.rating,"/5"]})]}),e.jsx(P,{className:"bg-green-500 text-white",children:"Reviewed"})]}),s.review&&e.jsxs("p",{className:"text-sm text-green-700 italic",children:['"',s.review,'"']})]}),s.cancelReason&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(W,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Booking Cancelled"})]}),e.jsx("p",{className:"text-sm text-red-600",children:s.cancelReason})]}),s.status==="In Progress"&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Service in Progress"}),e.jsx(Ie,{className:"h-4 w-4 text-blue-500"})]}),e.jsx(Pe,{value:65,className:"mb-2"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Estimated completion: 1.5 hours"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a&&e.jsxs(e.Fragment,{children:[s.status==="Confirmed"&&e.jsxs(t,{size:"sm",onClick:()=>de(s),children:[e.jsx(ze,{className:"h-4 w-4 mr-1"}),"Track"]}),e.jsxs(t,{size:"sm",onClick:()=>te(s.workerPhone,s.workerName),children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>re(s.id,s.workerName),children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Chat"]}),s.status==="Confirmed"&&e.jsxs(t,{size:"sm",variant:"destructive",onClick:()=>oe(s),children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Cancel"]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>le(s),children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Book Again"]}),s.status==="Completed"&&!s.rating&&e.jsxs(t,{size:"sm",onClick:()=>ne(s),children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"Rate Service"]}),s.status==="Completed"&&e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>xe(s),children:[e.jsx(ve,{className:"h-4 w-4 mr-1"}),"Dispute"]})]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>ie(s.id),children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Receipt"]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>me(),children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Share"]})]})]})},s.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-xl font-semibold",children:n.length})]})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),e.jsxs("p",{className:"text-xl font-semibold",children:["₹",I.toLocaleString()]})]})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-xl font-semibold",children:he.toFixed(1)})]})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Services Used"}),e.jsx("p",{className:"text-xl font-semibold",children:w.length})]})]})})})]}),e.jsxs(Ne,{value:U,onValueChange:G,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"grid w-full max-w-md grid-cols-3",children:[e.jsxs(R,{value:"current",children:["Current (",N.length,")"]}),e.jsxs(R,{value:"previous",children:["Previous (",f.length,")"]}),e.jsx(R,{value:"analytics",children:"Analytics"})]}),e.jsxs(t,{variant:"outline",onClick:()=>ae(!$),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),$?"Hide":"Show"," Stats"]})]}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search bookings...",value:o,onChange:s=>Q(s.target.value),className:"pl-10"})]}),e.jsxs(C,{value:u,onValueChange:q,children:[e.jsx(S,{children:e.jsx(b,{placeholder:"Filter by status"})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"All Status"}),e.jsx(i,{value:"confirmed",children:"Confirmed"}),e.jsx(i,{value:"in progress",children:"In Progress"}),e.jsx(i,{value:"completed",children:"Completed"}),e.jsx(i,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(C,{value:j,onValueChange:J,children:[e.jsx(S,{children:e.jsx(b,{placeholder:"Filter by service"})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"All Services"}),w.map(s=>e.jsx(i,{value:s.toLowerCase(),children:s},s))]})]}),e.jsxs(C,{value:X,onValueChange:_,children:[e.jsx(S,{children:e.jsx(b,{placeholder:"Sort by"})}),e.jsxs(y,{children:[e.jsx(i,{value:"date",children:"Date"}),e.jsx(i,{value:"amount",children:"Amount"}),e.jsx(i,{value:"rating",children:"Rating"}),e.jsx(i,{value:"service",children:"Service Type"})]})]})]})})}),e.jsx(T,{value:"current",className:"space-y-4",children:N.length===0?e.jsx(r,{children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(K,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No Current Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any active bookings right now."}),e.jsxs(t,{className:"mt-4",onClick:()=>V?.("customer-services"),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Book a Service"]})]})}):N.map(s=>z(s,!0))}),e.jsx(T,{value:"previous",className:"space-y-4",children:f.length===0?e.jsx(r,{children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(O,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No Previous Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"Your completed bookings will appear here."})]})}):f.map(s=>z(s,!1))}),e.jsx(T,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(k,{children:e.jsxs(B,{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Monthly Spending"})]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:ue.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-8 bg-primary/10 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium",children:s.month})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["₹",s.amount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.bookings," bookings"]})]})]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${s.amount/3500*100}%`}})})]},s.month))})})]}),e.jsxs(r,{children:[e.jsx(k,{children:e.jsxs(B,{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsx("span",{children:"Service Breakdown"})]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:w.map(s=>{const a=x.filter(d=>d.service===s),h=a.length/x.length*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${h}%`}})}),e.jsx("span",{className:"text-xs text-muted-foreground w-8",children:a.length})]})]},s)})})})]}),e.jsxs(r,{className:"md:col-span-2",children:[e.jsx(k,{children:e.jsxs(B,{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Your Activity Summary"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.length}),e.jsx("p",{className:"text-sm text-blue-700",children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.length}),e.jsx("p",{className:"text-sm text-green-700",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[Math.round(n.length/x.length*100),"%"]}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Success Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["₹",Math.round(I/n.length)||0]}),e.jsx("p",{className:"text-sm text-purple-700",children:"Avg Booking Cost"})]})]})})]})]})})]}),e.jsx(Ce,{open:Z,onOpenChange:p,children:e.jsxs(Se,{children:[e.jsxs(be,{children:[e.jsx(ye,{children:"Rate Your Service Experience"}),e.jsxs(ke,{children:["How was your experience with ",ee?.workerName,"?"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(E,{children:"Rating"}),e.jsx("div",{className:"flex items-center space-x-1 mt-2",children:[1,2,3,4,5].map(s=>e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>M(s),children:e.jsx(g,{className:`h-6 w-6 ${s<=D?"text-yellow-500 fill-current":"text-gray-300"}`})},s))})]}),e.jsxs("div",{children:[e.jsx(E,{children:"Review (Optional)"}),e.jsx(Be,{placeholder:"Share your experience...",value:se,onChange:s=>A(s.target.value),className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(t,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(t,{onClick:ce,children:"Submit Review"})]})]})]})})]})}export{js as default};
