import{r as m,j as e}from"./index-DC73O2Iq.js";import{c as A,B as d}from"./createLucideIcon-DV6iIV51.js";import{I as u}from"./input-dnW69Ym_.js";import{L as l}from"./label-Cx5_pDF_.js";import{C as f,b as y,c as b,d as N,a as v}from"./card-C28Yz27b.js";import{S as G,a as O,b as W,c as z,d as V}from"./select-Bk4-KUGq.js";import{T as _}from"./textarea-B8YiG350.js";import{B as C}from"./badge-DicuVv4H.js";import{M as H}from"./map-pin-DjfWYCin.js";import{D as X}from"./dollar-sign-BkHlonNu.js";import{C as Y}from"./clock-Dfd2bnl-.js";import{X as J}from"./x-Do_OPore.js";import{C as K}from"./circle-check-big-iNZ9dSWx.js";import"./index-BDJGNcjk.js";import"./index-C4R266pM.js";import"./index-CqejPAcr.js";import"./chevron-down-D5Ve5PaK.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],w=A("circle-plus",Q),Z=["Plumber","Carpenter","Mason","Construction Labour","Maid","Cook/Chef","Gardener","Security Guard","General Labour","Painter","Delivery Boy","Electrician","Welder","Waiter","Care Taker","Other"],k=[{value:"low",label:"Low - Within a week",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium - Within 2-3 days",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High - Urgent (Today/Tomorrow)",color:"bg-red-100 text-red-800"}];function ge({user:h,onTaskPosted:D,selectedCategory:x}){const[P,p]=m.useState(!!x),[t,c]=m.useState({title:"",description:"",category:x||"",location:"",budget:"",urgency:"medium",deadline:"",requirements:[""]}),[a,g]=m.useState({}),[j,q]=m.useState(!1),[T,L]=m.useState([]),o=s=>{const{name:r,value:i}=s.target;c(n=>({...n,[r]:i})),a[r]&&g(n=>({...n,[r]:""}))},S=(s,r)=>{c(i=>({...i,[s]:r})),a[s]&&g(i=>({...i,[s]:""}))},F=()=>{c(s=>({...s,requirements:[...s.requirements,""]}))},I=(s,r)=>{c(i=>({...i,requirements:i.requirements.map((n,U)=>U===s?r:n)}))},M=s=>{c(r=>({...r,requirements:r.requirements.filter((i,n)=>n!==s)}))},B=()=>{const s={};return t.title.trim()||(s.title="Task title is required"),t.description.trim()||(s.description="Task description is required"),t.category||(s.category="Category is required"),t.location.trim()||(s.location="Location is required"),(!t.budget||isNaN(Number(t.budget))||Number(t.budget)<=0)&&(s.budget="Valid budget amount is required"),g(s),Object.keys(s).length===0},E=s=>{s.preventDefault(),B()&&(q(!0),setTimeout(()=>{const r={id:Date.now().toString(),customerId:h.id,customerName:h.fullName,title:t.title,description:t.description,category:t.category,location:t.location,budget:Number(t.budget),urgency:t.urgency,createdAt:new Date().toISOString(),deadline:t.deadline||void 0,status:"posted",requirements:t.requirements.filter(i=>i.trim()),contactInfo:{phone:h.mobile,email:h.email}};L(i=>[r,...i]),D(r),c({title:"",description:"",category:"",location:"",budget:"",urgency:"medium",deadline:"",requirements:[""]}),p(!1),q(!1)},1e3))},R=s=>k.find(r=>r.value===s)||k[1];return P?e.jsxs(f,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Create New Task"}),e.jsx(N,{children:"Provide detailed information about your task requirements"})]}),!x&&e.jsx(d,{variant:"outline",onClick:()=>p(!1),disabled:j,children:"Cancel"})]})}),e.jsx(v,{children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold border-b pb-2",children:"Task Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title",children:"Task Title *"}),e.jsx(u,{id:"title",name:"title",value:t.title,onChange:o,placeholder:"e.g., Fix leaking kitchen faucet",required:!0}),a.title&&e.jsx("p",{className:"text-sm text-destructive",children:a.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Task Description *"}),e.jsx(_,{id:"description",name:"description",value:t.description,onChange:o,placeholder:"Describe the work you need done in detail...",rows:4,required:!0}),a.description&&e.jsx("p",{className:"text-sm text-destructive",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category",children:"Category *"}),e.jsxs(G,{onValueChange:s=>S("category",s),value:t.category,children:[e.jsx(O,{children:e.jsx(W,{placeholder:"Select work category"})}),e.jsx(z,{children:Z.map(s=>e.jsx(V,{value:s,children:s},s))})]}),a.category&&e.jsx("p",{className:"text-sm text-destructive",children:a.category})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"location",children:"Location *"}),e.jsx(u,{id:"location",name:"location",value:t.location,onChange:o,placeholder:"City, Area",required:!0}),a.location&&e.jsx("p",{className:"text-sm text-destructive",children:a.location})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold border-b pb-2",children:"Budget & Timeline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"budget",children:"Budget (₹) *"}),e.jsx(u,{id:"budget",name:"budget",type:"number",value:t.budget,onChange:o,placeholder:"Enter amount",required:!0}),a.budget&&e.jsx("p",{className:"text-sm text-destructive",children:a.budget})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"deadline",children:"Preferred Deadline"}),e.jsx(u,{id:"deadline",name:"deadline",type:"date",value:t.deadline,onChange:o,min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Urgency Level *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:k.map(s=>e.jsx(d,{type:"button",variant:t.urgency===s.value?"default":"outline",className:"justify-start h-auto p-3",onClick:()=>S("urgency",s.value),children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:s.value.toUpperCase()}),e.jsx("div",{className:"text-xs opacity-70",children:s.label.split(" - ")[1]})]})},s.value))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold border-b pb-2",children:"Requirements"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Task Requirements"}),e.jsx("div",{className:"space-y-2",children:t.requirements.map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:s,onChange:i=>I(r,i.target.value),placeholder:"Enter a requirement"}),t.requirements.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>M(r),children:e.jsx(J,{className:"h-4 w-4"})})]},r))}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:F,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add Requirement"]})]})]}),e.jsx("div",{className:"flex gap-4 pt-4",children:e.jsx(d,{type:"submit",className:"flex-1",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Posting Task..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Post Task"]})})})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Post a Task"]}),e.jsx(N,{children:"Post tasks for workers to view and apply. Get your work done efficiently."})]}),e.jsx(v,{children:e.jsxs(d,{onClick:()=>p(!0),className:"w-full",size:"lg",children:[e.jsx(w,{className:"h-5 w-5 mr-2"}),"Create New Task"]})})]}),T.length>0&&e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsx(b,{children:"Your Posted Tasks"}),e.jsx(N,{children:"Track and manage your posted tasks"})]}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:T.map(s=>{const r=R(s.urgency);return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]}),e.jsx(C,{className:r.color,children:s.urgency.toUpperCase()})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-4 w-4"}),s.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-4 w-4"}),"₹",s.budget]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-4 w-4"}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{variant:"outline",children:s.category}),e.jsx(C,{className:s.status==="posted"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",children:s.status.replace("-"," ").toUpperCase()})]})]},s.id)})})})]})]})}export{ge as TaskPosting};
